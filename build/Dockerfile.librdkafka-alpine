FROM alpine:3.9

WORKDIR /librdkafka

# Install requirements
RUN apk add --no-cache --virtual .build-deps \
    bash \
    g++ \
    gcc \
    git \
    make \
    python \
# Optional deps to build with ssl, lz4:
    lz4-dev \
    cyrus-sasl-dev \
    openssl-dev

# Build librdkafka from source
RUN git clone https://github.com/edenhill/librdkafka.git . \
    && git checkout v0.11.6 \
    && ./configure \
    && make
